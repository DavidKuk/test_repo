name: GitHub Tag Action
on:
  push:
     branches:
       - master

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
        - uses: actions/checkout@v2

        - name: Get version and push tag.
          id:   tag_version
          uses: mathieudutour/github-tag-action@v6.1
          with:
            github_token: ${{ secrets.GITHUB_TOKEN }}

        - name: Create GitHub release
          uses: ncipollo/release-action@v1
          with:
             tag: ${{ steps.tag_version.outputs.new_tag }}
             name: Release ${{ steps.tag_version.outputs.new_tag }}
             body: ${{ steps.tag_version.outputs.changelog }}

        - name: Notify me through Facebook.
          uses: appleboy/facebook-action@master
          with:
            fb_page_token: ${{ secrets.FB_PAGE_TOKEN }}
            fb_verify_token: ${{ secrets.FB_VERIFY_TOKEN }}
            to: ${{ secrets.FB_TO }}
            images: "https://golang.org/doc/gopher/gophercolor.png"

